<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="做一些更加疯狂的魔改吧">
<title>创建一个新的Hugo页面类型</title>

<link rel='canonical' href='https://syriii.github.io/p/create_template_hugo_blog/'>

<link rel="stylesheet" href="/scss/style.min.25d546fb6050ca71c570b0d3dc874bbc03021951697ce33153dd3ab51c436986.css"><meta property='og:title' content="创建一个新的Hugo页面类型">
<meta property='og:description' content="做一些更加疯狂的魔改吧">
<meta property='og:url' content='https://syriii.github.io/p/create_template_hugo_blog/'>
<meta property='og:site_name' content='纸箱子 | Syriii的藏身处'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-09-14T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-09-14T16:56:08&#43;08:00'/>
<meta name="twitter:title" content="创建一个新的Hugo页面类型">
<meta name="twitter:description" content="做一些更加疯狂的魔改吧">
    <link rel="shortcut icon" href="/favicon.png" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_126df252926d3951.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">纸箱子 | Syriii的藏身处</a></h1>
            <h2 class="site-description">把记忆压在箱底，再忘掉他们</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/752141'
                        target="_blank"
                        title="Bilibili"
                        rel="me"
                    >
                        
                        
                            <!--
tags: [china, platform, streaming, video]
category: Brand
version: "2.1"
unicode: "f6d2"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="32"
  height="32"
  viewBox="0 0 24 24"
  fill="none"
  stroke="#000000"
  stroke-width="1"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" />
  <path d="M8 3l2 3" />
  <path d="M16 3l-2 3" />
  <path d="M9 13v-2" />
  <path d="M15 11v2" />
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/Syriii'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href=''
                        target="_blank"
                        title="RSS"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页｜Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/categories/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



                
                <span>分类｜Categories</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档｜Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%8F%8B%E9%93%BElinks/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>友链｜Links</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8Eabout/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于｜About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索｜Search</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#archives-modify">归档样式调整 </a>
      <ol>
        <li><a href="#补充一些基本的语法">补充一些基本的语法</a></li>
        <li><a href="#解读archiveshtml">解读archives.html</a></li>
        <li><a href="#修改archiveshtml">修改archives.html</a></li>
      </ol>
    </li>
    <li><a href="#将tag和分类都移到分类页中">将tag和分类都移到分类页中</a></li>
    <li><a href="#关于页面编辑和热力图等">关于页面编辑和热力图等</a></li>
    <li><a href="#致谢">致谢</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/hugo/" >
                Hugo
            </a>
        
            <a href="/categories/%E6%95%99%E7%A8%8B/" >
                教程
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/create_template_hugo_blog/">创建一个新的Hugo页面类型</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            做一些更加疯狂的魔改吧
        </h3>
        
    </div>

    
    
    
    
    
    <footer class="article-time">
        
            <div>
                <!--
tags: [monthly-calendar, month-view, date-month, monthly-schedule, timeframe, calendar-grid, month, month-planner, monthly, date-grid]
version: "2.41"
unicode: "fd2f"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="32"
  height="32"
  viewBox="0 0 24 24"
  fill="none"
  stroke="#000000"
  stroke-width="1"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" />
  <path d="M16 3v4" />
  <path d="M8 3v4" />
  <path d="M4 11h16" />
  <path d="M7 14h.013" />
  <path d="M10.01 14h.005" />
  <path d="M13.01 14h.005" />
  <path d="M16.015 14h.005" />
  <path d="M13.015 17h.005" />
  <path d="M7.01 17h.005" />
  <path d="M10.01 17h.005" />
</svg>

                <time class="article-time--published">
                    发布时间: 2025-09-14
                </time>
            </div>
        

        
            <div>
                <!--
category: Design
tags: [pencil, change, update]
version: "1.0"
unicode: "ea98"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="32"
  height="32"
  viewBox="0 0 24 24"
  fill="none"
  stroke="#000000"
  stroke-width="1"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" />
  <path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" />
  <path d="M16 5l3 3" />
</svg>

                <time class="article-time--lastmod">
                    最后更新: 2025-09-14
                </time>
            </div>
        

        
            <div>
                <!--
tags: [time, hour, work, alarm, on]
category: System
version: "1.105"
unicode: "f549"
-->
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="32"
  height="32"
  viewBox="0 0 24 24"
  fill="none"
  stroke="#000000"
  stroke-width="1"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M12 7v5l2 2" />
  <path d="M17 22l5 -3l-5 -3z" />
  <path d="M13.017 20.943a9 9 0 1 1 7.831 -7.292" />
</svg>

                <time class="article-time--reading">
                    阅读时长: 6 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p><img src="/p/create_template_hugo_blog/pic/hugo-logo-wide.svg"
	
	
	
	loading="lazy"
	
		alt="hugo-logo"
	
	
></p>
<h1 id="创建一个新的hugo页面类型">创建一个新的Hugo页面类型
</h1><p>想了想还是单开一偏文章记录一下这部分内容，毕竟读完再写完这部分内容后，个人感觉对于hugo的一些修改已经做到了入门。</p>
<blockquote class="alert alert-warning">
    <div class="alert-prefix"><i class="ri-alert-prefix-icon"></i>warning</div>
    <p>个人前端能力有限，部分代码为ai生成。</p></blockquote>


<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
<h2 id="archives-modify">归档样式调整 
</h2><p>对于归档，我期望是仅按照时间线保留我的文章，因此需要对归档的整体页面进行大改造。</p>
<p>首先我们找到归档的菜单配置<code>content/page/archives/index.md</code>，可以看到归档的layout模板是<code>layout: &quot;archives&quot;</code>。通过进一步查询，可以找到归档页面的模板在<code>layouts/_default/archives.html</code>这个目录下。</p>
<blockquote class="alert alert-note">
    <div class="alert-prefix"><i class="ri-alert-prefix-icon"></i>note</div>
    <p>归档这个模板是主题已经提供的，我们可以在根目录新建同名文件来覆盖掉主题的配置，也可以在主题内找到同名文件进行修改。</p></blockquote>


<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
<p>既然我们要写一个新的归档页面，那么就需要了解原本的归档页面是怎么实现的。首先来简单的阅读一下archives这个模板：<em>archives.html</em>，对于内容不感兴趣的可以直接跳过。</p>
<h3 id="补充一些基本的语法">补充一些基本的语法
</h3><p>由于Hugo是使用Go语言编写的，因此除了正常的html之外，Hugo提供了一些来自于Go语言的语法规则，比如在Hugo的html文件中随处可见的<code>{{}}</code>语法。Hugo使用的<code> {{}}</code> 语法来自Go语言的 text/template 和 html/template 包，这是Go标准库提供的模板系统。</p>
<ul>
<li>数据访问</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{ .Title }}           <span class="c">&lt;!-- 当前页面标题 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ .Site.Title }}      <span class="c">&lt;!-- 网站标题 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ .Params.author }}   <span class="c">&lt;!-- 页面参数中的作者 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ $.Site.BaseURL }}   <span class="c">&lt;!-- 根上下文的网站基础URL --&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>变量操作</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- 变量定义 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ $title := .Title }}
</span></span><span class="line"><span class="cl">{{ $posts := .Site.RegularPages }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 变量使用 --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ $title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>共有 {{ len $posts }} 篇文章<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>条件控制</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- 基本条件 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ if .Params.featured }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;badge&#34;</span><span class="p">&gt;</span>精选<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{ end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 条件分支 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ if eq .Type &#34;post&#34; }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">article</span><span class="p">&gt;</span>文章内容<span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{ else if eq .Type &#34;page&#34; }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>页面内容<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{ else }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>其他内容<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{ end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 条件判断函数 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ if and .Params.date (not .Params.hidden) }}
</span></span><span class="line"><span class="cl">    显示日期
</span></span><span class="line"><span class="cl">{{ end }}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>循环控制</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- 基本循环 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ range .Pages }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{ end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 带索引的循环 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ range $index, $page := .Pages }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item-{{ $index }}&#34;</span><span class="p">&gt;</span>{{ $page.Title }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{ end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 带键值的循环 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ range $key, $value := .Params.tags }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tag-{{ $key }}&#34;</span><span class="p">&gt;</span>{{ $value }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{ end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 空值处理 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ range .Pages }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{ else }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>暂无内容<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{ end }}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>函数调用</li>
</ul>
<p>函数创建这里就先跳过，简单的修改暂时用不到创建，只要能看懂代码就足够了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- 内置函数 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ len .Pages }}                    <span class="c">&lt;!-- 获取长度 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ add 1 2 }}                      <span class="c">&lt;!-- 数学运算 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ printf &#34;Hello %s&#34; .Title }}     <span class="c">&lt;!-- 格式化字符串 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ now.Format &#34;2006-01-02&#34; }}      <span class="c">&lt;!-- 日期格式化 --&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 字符串处理 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ upper .Title }}                 <span class="c">&lt;!-- 转大写 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ lower .Title }}                 <span class="c">&lt;!-- 转小写 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ replace .Title &#34; &#34; &#34;-&#34; }}       <span class="c">&lt;!-- 字符串替换 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ truncate 100 .Summary }}        <span class="c">&lt;!-- 截断文本 --&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 集合操作 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ where .Pages &#34;Type&#34; &#34;post&#34; }}   <span class="c">&lt;!-- 过滤 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ first 5 .Pages }}               <span class="c">&lt;!-- 取前5个 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ sort .Pages &#34;Date&#34; &#34;desc&#34; }}    <span class="c">&lt;!-- 排序 --&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>管道操作</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- 链式操作 --&gt;</span>
</span></span><span class="line"><span class="cl">{{ .Title | upper | printf &#34;标题：%s&#34; }}
</span></span><span class="line"><span class="cl">{{ .Pages | where &#34;Type&#34; &#34;post&#34; | first 3 }}
</span></span><span class="line"><span class="cl">{{ .Date | dateFormat &#34;2006年01月02日&#34; }}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>特殊符号说明
<ul>
<li>空白控制
<ul>
<li><code>{{-</code>：  去除左侧空白</li>
<li><code>-}}</code>： 去除右侧空白</li>
<li><code>{{- .Title -}} </code>：去除两侧空白</li>
</ul>
</li>
<li>上下文访问
<ul>
<li><code>.</code> ：当前上下文</li>
<li><code>$.</code> ： 根上下文（页面级别）</li>
<li><code>.Site</code> ： 网站级别数据</li>
<li><code>.Params</code> ： 页面参数</li>
</ul>
</li>
</ul>
</li>
<li>常用内置变量
<ul>
<li>页面级别
<ul>
<li><code>.Title</code> ： 页面标题</li>
<li><code>.Content</code> ： 页面内容</li>
<li><code>.Date</code> ： 页面日期</li>
<li><code>.Params</code> ： 前置参数</li>
</ul>
</li>
<li>网站级别
<ul>
<li><code>.Site.Title</code>：- 网站标题</li>
<li><code>.Site.Pages</code> ：所有页面</li>
<li><code>.Site.RegularPages</code>：常规页面</li>
<li><code>.Site.Params</code> ： 网站配置参数</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="解读archiveshtml">解读archives.html
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{ define &#34;body-class&#34; }}template-archives{{ end }}
</span></span></code></pre></td></tr></table>
</div>
</div><p>这行代码为页面的body元素添加了CSS类名 template-archives ，用于归档页面的特定样式。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{ define &#34;main&#34; }}
</span></span></code></pre></td></tr></table>
</div>
</div><p>这里定义了主要内容区域的模板块，我们的内容也都是在这个区域中修改和展示的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{- $taxonomy := $.Site.GetPage &#34;taxonomyTerm&#34; &#34;categories&#34; -}}
</span></span><span class="line"><span class="cl">    {{- $terms := $taxonomy.Pages -}}
</span></span><span class="line"><span class="cl">    {{ if $terms }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;section-title&#34;</span><span class="p">&gt;</span>{{ $taxonomy.Title }}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;subsection-list&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;article-list--tile&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            {{ range $terms }}
</span></span><span class="line"><span class="cl">                {{ partial &#34;article-list/tile&#34; (dict &#34;context&#34; . &#34;size&#34; &#34;250x150&#34; &#34;Type&#34; &#34;taxonomy&#34;) }}
</span></span><span class="line"><span class="cl">            {{ end }}
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{ end }}
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>定义了一个变量<code>$taxonomy</code>，它的值是该站点叫作<code>categories</code>的<code>taxonomyTerm</code>页面。之后定义了另一个变量<code>$term</code>，值是这个categories下所有的页面。</p>
<p>实际上我们可以简单的把taxonomyTerm和term理解成上下两个层级的文件目录，下面展示的这个目录结构就可以很简单的看出<code>taxonomyTerm</code>和<code>term</code>是一个什么样的关系。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">网站根目录
</span></span><span class="line"><span class="cl">└── categories/ (taxonomyTerm页面)
</span></span><span class="line"><span class="cl">    ├── hugo/ (term页面)
</span></span><span class="line"><span class="cl">    ├── hexo/ (term页面)
</span></span><span class="line"><span class="cl">    └── 前端/ (term页面)
</span></span></code></pre></td></tr></table>
</div>
</div><p>我们也可以在生成的public的目录下直观的看到页面的实际结构：</p>
<p><img src="/p/create_template_hugo_blog/pic/taxonomy-categories.png"
	width="630"
	height="814"
	srcset="/p/create_template_hugo_blog/pic/taxonomy-categories_hu_de2bd3a1e3ea072a.png 480w, /p/create_template_hugo_blog/pic/taxonomy-categories_hu_a98a4b3566d67d89.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="77"
		data-flex-basis="185px"
	
></p>
<p>后面的内容就很简单了，如果term存在，就遍历它并展示在页面中。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{ $pages := where .Site.RegularPages &#34;Type&#34; &#34;in&#34; .Site.Params.mainSections }}
</span></span><span class="line"><span class="cl">{{ $notHidden := where .Site.RegularPages &#34;Params.hidden&#34; &#34;!=&#34; true }}
</span></span><span class="line"><span class="cl">{{ $filtered := ($pages | intersect $notHidden) }}
</span></span></code></pre></td></tr></table>
</div>
</div><p>有了前面了解categories的基础，这里定义的三个变量就很好读懂了。</p>
<p><code>$pages</code>是从所有常规页面中，筛选出类型是主要栏目配置的页面，也就是我们写的那些能够在首页展示的博客文章。</p>
<p><code>$notHidden</code>则是从所有页面中筛选出所有被隐藏的博客文章页面。</p>
<p>最后<code>$filtered</code>是取了上述两个变量的交集，也就是所有没有被隐藏的博客文章。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{ range $filtered.GroupByDate &#34;2006&#34; }}
</span></span><span class="line"><span class="cl">{{ $id := lower (replace .Key &#34; &#34; &#34;-&#34;) }}
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;archives-group&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;{{ $id }}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;archives-date section-title&#34;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ $.RelPermalink }}#{{ $id }}&#34;</span><span class="p">&gt;</span>{{ .Key }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;article-list--compact&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        {{ range .Pages }}
</span></span><span class="line"><span class="cl">            {{ partial &#34;article-list/compact&#34; . }}
</span></span><span class="line"><span class="cl">        {{ end }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{ end }}
</span></span></code></pre></td></tr></table>
</div>
</div><p>这部分内容是一个循环，它会遍历所有能看到的博客文章页面的年份分组。其中<code>GroupByDate &quot;2006&quot;</code>的含义是按照年份分组，并且<strong>这个2006不能修改！！</strong></p>
<blockquote class="alert alert-important">
    <div class="alert-prefix"><i class="ri-alert-prefix-icon"></i>important</div>
    <p>Hugo使用Go语言的时间格式系统，它基于一个 固定的参考时间 ：<code>Mon Jan 2 15:04:05 MST 2006</code></p>
<p>这个参考时间的各个部分都有特定含义：</p>
<ul>
<li>2006 = 年份</li>
<li>01 = 月份</li>
<li>02 = 日期</li>
<li>15 = 小时（24小时制）</li>
<li>04 = 分钟</li>
<li>05 = 秒钟</li>
</ul>
<p>也就是说，当我们使用2006-01-02的时候，就相当于其他语言使用 yyyy-MM-dd。</p></blockquote>


<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
<p><code>GroupByDate</code>会返回两个值，分别是<code>.Key</code>和<code>.Pages</code>。获取了我们需要的时间之后，就可以配置页面的锚点id了，也就是<code>$id</code>。对id赋值的这行代码就是将<code>.Key</code>的值做规范化处理，将空格替换成成短横杠，并全部设置为小写。需要这么做的原因依然时候go的时间格式问题，比如按照<code>Jan 2026</code>这样的月份分组格式，就会产生空格。</p>
<p>后续会创建已有年份的div容器，并将各个年份的文章配置成链接并放置到相应的年份容器中。</p>
<p>年份容器的id就是前面获取的<code>$id</code>，并且对这些容器创建用于跳转的锚点链接<code> &lt;a href=&quot;{{ $.RelPermalink }}#{{ $id }}&quot;&gt;{{ .Key }}&lt;/a&gt;</code>。</p>
<blockquote class="alert alert-note">
    <div class="alert-prefix"><i class="ri-alert-prefix-icon"></i>note</div>
    <p><code>$.RelPermalink</code>指当前页面的相对永久链接，#{{ $id }}`指锚点片段。</p></blockquote>


<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
<p>最后，循环当前年份的<code>.Pages</code>也就是当前年份的所有博客页面。以<code>article-list/compact</code>这个模板渲染出当前博客的文章列表。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{ partialCached &#34;footer/footer&#34; . }}
</span></span></code></pre></td></tr></table>
</div>
</div><p>在页面的最后，使用缓存的<code>footer/footer</code>模板作为页脚。</p>
<h3 id="修改archiveshtml">修改archives.html
</h3><h2 id="将tag和分类都移到分类页中">将tag和分类都移到分类页中
</h2><h2 id="关于页面编辑和热力图等">关于页面编辑和热力图等
</h2><h2 id="致谢">致谢
</h2><p><a class="link" href="https://blog.hentioe.dev/posts/hugo-support-blockquote-alerts.html"  target="_blank" rel="noopener"
    >让 Hugo 支持 GitHub 风格的块引用 Alerts</a></p>
<p><a class="link" href="https://letere-gzj.github.io/hugo-stack/p/hugo/custom-stack-theme/"  target="_blank" rel="noopener"
    >【Hugo】Stack主题自定义修改</a></p>
<p><a class="link" href="https://blog.echosec.top/p/custom-hugo-theme-styles/"  target="_blank" rel="noopener"
    >『Hugo』Hugo Styles</a></p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>翻箱子还要拿走点东西的时候，记得和主人说一声。</span>
    </section>
    

    
</footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/customize_hugo_blog/">
        
        

        <div class="article-details">
            <h2 class="article-title">自定义你的Hugo页面</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/shortcode_hugo_blog/">
        
        

        <div class="article-details">
            <h2 class="article-title">自定义Hugo简码</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/new_hugo_blog/">
        
        

        <div class="article-details">
            <h2 class="article-title">新建一个hugo博客站</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 Syriii
    </section>
    
    <section class="powerby">
        
            恭喜你发现这个箱子 <br/>
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>



  
  <script>
    const arrowIconBase64 = "iVBORw0KGgoAAAANSUhEUgAAABYAAAAWBAMAAAA2mnEIAAAAGFBMVEUAAABgYGBoaGhlZWVnZ2dmZmZmZmZmZmb\u002bi0kUAAAAB3RSTlMAICBvb3DfipQdkQAAAFRJREFUeJxioAlggtIKDAwM4QJgJmMxAwMDWxKYY5YAItNBbMY0sKxaIlgWzGZOAwkbQEwQS2BgS4SZWsaYpgCzQi0tCW4dM0w1CCiS5WJAAAAA\/\/\/GVAhdRZFiWgAAAABJRU5ErkJggg==";
    
    
    const createButton = (className, isCollapse = false) => {
      const template = `
        <div class="${className}">
          <span class="${isCollapse ? 'collapse-btn-inner' : 'code-more-btn'}">
            <img 
              class="${isCollapse ? 'code-collapse-img' : 'code-more-img'}"
              src="data:image/png;base64,${arrowIconBase64}"
              alt="${isCollapse ? '收起' : '展开'}"
            >
          </span>
        </div>
      `;
      const div = document.createElement('div');
      div.innerHTML = template.trim();
      return div.firstElementChild;
    };

    
    const scrollToBlock = (element, offset = 100) => {
      const rect = element.getBoundingClientRect();
      const scrollTop = window.pageYOffset + rect.top - offset;
      window.scrollTo({
        top: scrollTop,
        behavior: 'smooth'
      });
    };

    
    function initCodeMoreBox() {
      try {
        const codeBlocks = document.querySelectorAll(".highlight");
        if (!codeBlocks?.length) {
          console.log('No code blocks found');
          return;
        }

        codeBlocks.forEach(codeBlock => {
          
          if (codeBlock.scrollHeight <= codeBlock.clientHeight) {
            return;
          }

          
          const expandBox = createButton('code-more-box');
          const collapseBox = createButton('code-collapse-btn', true);

          
          expandBox.querySelector('.code-more-btn').addEventListener('click', () => {
            codeBlock.classList.add('code-show');
            expandBox.style.display = 'none';
            window.dispatchEvent(new Event('resize'));
          });

          
          collapseBox.querySelector('.collapse-btn-inner').addEventListener('click', () => {
            codeBlock.classList.remove('code-show');
            expandBox.style.display = 'block';
            
            
            requestAnimationFrame(() => scrollToBlock(codeBlock));
            window.dispatchEvent(new Event('resize'));
          });

          
          codeBlock.appendChild(expandBox);
          codeBlock.appendChild(collapseBox);
        });
      } catch (error) {
        console.error('Error initializing code more box:', error);
      }
    }

    
    document.addEventListener('DOMContentLoaded', initCodeMoreBox);
  </script>



<script>
  
  const backToTop = () => {
    document.documentElement.scrollIntoView({
      behavior: 'smooth'
    });
  };

  
  function initBackToTopBtn() {
    try {
      const backToTopBtn = document.getElementById('back-to-top');
      if (!backToTopBtn) {
        console.log('Back to top button not found');
        return;
      }

      
      backToTopBtn.addEventListener('click', (e) => {
        e.preventDefault();
        backToTop();
      });

      
      const toggleButtonVisibility = () => {
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        backToTopBtn.style.display = scrollTop > 200 ? 'inline' : 'none';
      };

      
      toggleButtonVisibility();

      
      window.addEventListener('scroll', toggleButtonVisibility);
    } catch (error) {
      console.error('Error initializing back to top button:', error);
    }
  }

  
  document.addEventListener('DOMContentLoaded', initBackToTopBtn);
</script>

<a href="#" id="back-to-top" title="返回顶部"></a>



<script src="https://npm.elemecdn.com/nprogress@0.2.0/nprogress.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://npm.elemecdn.com/nprogress@0.2.0/nprogress.css" crossorigin="anonymous" />
<script>
  
  NProgress.configure({ showSpinner: false });
  NProgress.start();
  
  
  document.addEventListener('readystatechange', () => {
    if (document.readyState === 'interactive') NProgress.inc(0.8);
    if (document.readyState === 'complete') NProgress.done();
  });
</script>


    </body>
</html>
